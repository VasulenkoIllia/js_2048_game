var e=document.querySelector(".button"),r=document.querySelectorAll(".message"),t=document.querySelector(".game-score"),i={cells:document.querySelectorAll(".field-cell"),field:document.querySelector("tbody").children,score:0,getRandomNumber:function(e){return Math.floor(Math.random()*e)},generateRandomCell:function(){var e=this.getRandomNumber(10),n=this.getRandomNumber(this.fieldArr.length),o=this.getRandomNumber(this.fieldArr.length);if(""===this.fieldArr[n][o]){this.fieldArr[n][o]=4===e?4:2,t.textContent=this.score;for(var l=0;l<this.fieldArr.length;l++)for(var d=0;d<this.fieldArr.length;d++){var s=this.fieldArr[l][d],f=this.field[l].children[d];f.textContent=s,f.className=""===s?"field-cell":"field-cell field-cell--".concat(s),2048===s&&(r[1].classList.remove("hidden"),document.body.removeEventListener("keydown",i.start))}}else this.generateRandomCell()},move:function(e){for(var r=0;r<this.fieldArr.length;r++){var t=void 0,i=(t="right"===e||"left"===e?this.fieldArr[r]:[this.fieldArr[0][r],this.fieldArr[1][r],this.fieldArr[2][r],this.fieldArr[3][r]]).filter(function(e){return e}),n=Array(t.length-i.length).fill(""),o="right"===e||"down"===e?n.concat(i):i.concat(n);("right"===e||"left"===e)&&(this.fieldArr[r]=o),("up"===e||"down"===e)&&(this.fieldArr[0][r]=o[0],this.fieldArr[1][r]=o[1],this.fieldArr[2][r]=o[2],this.fieldArr[3][r]=o[3])}},combineRow:function(){for(var e=0;e<this.fieldArr.length;e++)for(var r=this.fieldArr[e],t=0;t<r.length-1;t++)r[t]>0&&r[t]===r[t+1]&&(r[t]*=2,this.score+=r[t],r[t+1]="")},combineColumn:function(){for(var e=0;e<this.fieldArr.length-1;e++)for(var r=0;r<this.fieldArr[e].length;r++)+this.fieldArr[e][r]>0&&this.fieldArr[e][r]===this.fieldArr[e+1][r]&&(this.fieldArr[e][r]*=2,this.score+=this.fieldArr[e][r],this.fieldArr[e+1][r]="")},canMoveRight:function(){for(var e=0;e<this.fieldArr.length;e++)for(var r=this.fieldArr[e],t=0;t<r.length-1;t++)if(r[t]&&r[t]===r[t+1]||r[t]&&!r[t+1])return!0;return!1},canMoveLeft:function(){for(var e=0;e<this.fieldArr.length;e++)for(var r=this.fieldArr[e],t=1;t<r.length;t++)if(r[t]&&r[t]===r[t-1]||r[t]&&!r[t-1])return!0;return!1},canMoveUp:function(){for(var e=0;e<this.fieldArr.length;e++)for(var r=[this.fieldArr[0][e],this.fieldArr[1][e],this.fieldArr[2][e],this.fieldArr[3][e]],t=1;t<r.length;t++)if(r[t]&&r[t]===r[t-1]||r[t]&&!r[t-1])return!0;return!1},canMoveDown:function(){for(var e=0;e<this.fieldArr.length;e++)for(var r=[this.fieldArr[0][e],this.fieldArr[1][e],this.fieldArr[2][e],this.fieldArr[3][e]],t=0;t<r.length-1;t++)if(r[t]&&r[t]===r[t+1]||r[t]&&!r[t+1])return!0;return!1},checkForLose:function(){return!(i.canMoveDown()||i.canMoveUp()||i.canMoveRight()||i.canMoveLeft())&&(r[0].classList.remove("hidden"),document.body.removeEventListener("keydown",i.start),!0)},start:function(e){switch(e.code){case"ArrowRight":i.canMoveRight()&&(i.move("right"),i.combineRow(),i.move("right"),i.generateRandomCell()),i.checkForLose();break;case"ArrowLeft":i.canMoveLeft()&&(i.move("left"),i.combineRow(),i.move("left"),i.generateRandomCell()),i.checkForLose();break;case"ArrowUp":i.canMoveUp()&&(i.move("up"),i.combineColumn(),i.move("up"),i.generateRandomCell()),i.checkForLose();break;case"ArrowDown":i.canMoveDown()&&(i.move("down"),i.combineColumn(),i.move("down"),i.generateRandomCell()),i.checkForLose()}}};e.addEventListener("click",function(){i.fieldArr=[["","","",""],["","","",""],["","","",""],["","","",""]],e.classList.remove("start"),e.classList.add("restart"),e.textContent="Restart",r.forEach(function(e){return e.classList.add("hidden")}),i.score=0,i.generateRandomCell(),i.generateRandomCell(),document.body.addEventListener("keydown",i.start)});
//# sourceMappingURL=index.fd2f692b.js.map
